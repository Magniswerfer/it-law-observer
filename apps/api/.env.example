# Supabase configuration
SUPABASE_URL=https://your-project-ref.supabase.co
# Prefer a Service Role key for backend PostgREST/Storage access.
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
# Optional legacy name (if you already use it)
# SUPABASE_SECRET_KEY=sb_secret_your-secret-key

# Supabase anon key (used for validating user sessions in API)
SUPABASE_ANON_KEY=your-anon-key

# Optional: Comma-separated allowlist of admin user emails.
# If empty/unset, any authenticated Supabase user is treated as admin.
# ADMIN_EMAILS=admin@example.com,other@example.com

# Optional: direct database URL (useful for local scripts/migrations)
# DATABASE_URL=postgresql://username:password@localhost:5432/it_politics_radar

# Ingestion security token (generate a secure random string)
INGEST_TOKEN=your-secure-ingestion-token-here

# Optional: OpenAI API key for LLM enrichment
# OPENAI_API_KEY=your-openai-api-key-here
# Optional: Groq API key for LLM enrichment (takes precedence over OPENAI_API_KEY when LLM_PROVIDER=auto)
# GROQ_API_KEY=your-groq-api-key-here

# Optional: choose provider explicitly: auto|groq|openai
# LLM_PROVIDER=auto

# Optional: model selection
# GROQ_MODEL=llama-3.1-70b-versatile
# OPENAI_MODEL=gpt-4o-mini
# LLM_MODEL=override-model-name

# Optional: (advanced) override base URLs
# GROQ_BASE_URL=https://api.groq.com/openai/v1
# OPENAI_BASE_URL=https://api.openai.com/v1

# Optional: include PDF text in LLM prompt (downloads PDFs)
ENRICH_FETCH_PDFS=true
# ENRICH_PDF_MAX_PAGES=25
# ENRICH_PDF_MAX_CHARS=40000
# Optional: override headers used when fetching PDFs (helps with Cloudflare/WAF 403s)
# PDF_FETCH_USER_AGENT=Mozilla/5.0 ...
# PDF_FETCH_REFERER=https://www.ft.dk/

# Optional: limits for user-uploaded PDFs / extracted text
PDF_UPLOAD_MAX_MB=25
PDF_TEXT_MAX_CHARS=200000

# Optional: run democracy/digital-rights policy analysis (stored in proposal_policy_analyses table)
# ENRICH_POLICY_ANALYSIS=true
# POLICY_ANALYSIS_PROMPT_VERSION=1.1
# POLICY_ANALYSIS_TEMPERATURE=0.3
# POLICY_ANALYSIS_MAX_TOKENS=1400

# Optional: treat "in process" as "not closed" per ingestion.py isClosed logic
# (we no longer filter on `afgørelsesdato eq null` in the OData query).
# ODA_ONLY_IN_PROCESS=true

# Optional: cutoff for very old "zombie" bills with no clear closure markers.
# Bills (Sag.typeid=3) with opdateringsdato older than this are treated as closed/irrelevant.
ODA_OLD_BILL_CUTOFF_DATE=2018-01-01T00:00:00Z

# Optional: enrich proposals with direct PDF links via SagDokument → Dokument → Fil
ODA_FETCH_PDF_URLS=true
# Optional: delay between per-Sag SagDokument calls (avoid hammering ODA)
ODA_DOC_REQUEST_DELAY_MS=100
# Optional: retries for transient ODA doc fetch errors (5xx/timeouts/429)
ODA_DOC_REQUEST_RETRIES=2
